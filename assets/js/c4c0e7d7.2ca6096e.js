"use strict";(self.webpackChunkproxily_doc=self.webpackChunkproxily_doc||[]).push([[290],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return h}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),d=u(n),h=a,m=d["".concat(c,".").concat(h)]||d[h]||p[h]||s;return n?r.createElement(m,o(o({ref:t},l),{},{components:n})):r.createElement(m,o({ref:t},l))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,o=new Array(s);o[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var u=2;u<s;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2811:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return c},metadata:function(){return u},toc:function(){return l},default:function(){return d}});var r=n(7462),a=n(3366),s=(n(7294),n(3905)),o=["components"],i={title:"Async Functions",sidebar_position:3},c=void 0,u={unversionedId:"Features/async",id:"Features/async",isDocsHomePage:!1,title:"Async Functions",description:"Promises",source:"@site/docs/Features/async.md",sourceDirName:"Features",slug:"/Features/async",permalink:"/docs/Features/async",editUrl:"https://github.com/selsamman/proxily-doc/edit/master/website/docs/Features/async.md",version:"current",sidebarPosition:3,frontMatter:{title:"Async Functions",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Persist & Serialize",permalink:"/docs/Features/persistence"},next:{title:"Transactions",permalink:"/docs/Features/transactions"}},l=[{value:"Promises",id:"promises",children:[]},{value:"Sagas",id:"sagas",children:[]}],p={toc:l};function d(e){var t=e.components,n=(0,a.Z)(e,o);return(0,s.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h2",{id:"promises"},"Promises"),(0,s.kt)("p",null,"Since actions are just normal member functions they can be asynchronous:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"class CounterState {\n  value = 0;\n  async delayedIncrement () {\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    this.value++\n  }\n}\n")),(0,s.kt)("h2",{id:"sagas"},"Sagas"),(0,s.kt)("p",null,"When you have more complex asynchronous behavior or situations where promises are inadequate you can use generators. ",(0,s.kt)("a",{parentName:"p",href:"https://redux-saga.js.org/"},"Redux-Saga")," has a rich tool-kit for organizing asynchronous behaviours using generators. Proxily integrates with Redux-Sagas without having to use Redux as a store.  "),(0,s.kt)("p",null,'While Redux-sagas you "listening" for actions. With Proxily you schedule sagas with ',(0,s.kt)("a",{parentName:"p",href:"/docs/API/async#scheduletask"},(0,s.kt)("strong",{parentName:"a"},"scheduleTask")),"."),(0,s.kt)("p",null,"Start with a generator that has a yield for each asynchronous step of the task: "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"function *worker({interval} : {interval : number}) {\n      yield delay(interval);\n      // Do something\n}\n")),(0,s.kt)("p",null,"Then you schedule an instance of that task:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"  scheduleTask(worker, {interval: 150}, takeEvery);\n")),(0,s.kt)("p",null,"Any parameters needed by the task are passed through as an object."),(0,s.kt)("p",null,"When you schedule the task, you chose one of the take helpers such as takeEvery, takeLeading, debounce, throttle to indicate how the scheduling should deal with concurrent invocation of the task.  See the ",(0,s.kt)("a",{parentName:"p",href:"/docs/API/async#scheduletask"},(0,s.kt)("strong",{parentName:"a"},"scheduleTask"))," for more details."),(0,s.kt)("p",null,"Generator tasks may also be class members:```typescript\nclass Container {\n*task({interval} : {interval : number}) {\nyield delay(interval);\n// Do something\n}\ninvokeTask () {\nscheduleTask(this.task,\n{interval: 1000}, takeLeading); //make sequential\n}\n}"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"const container = observable(new Container());\ncontainer.invokeTask();\n")),(0,s.kt)("p",null,"If using an effect that takes a time parameter like throttle or debounce you can pass it in:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"scheduleTask(this.task, {interval: 1000}, debounce, 500);\n")),(0,s.kt)("p",null,"You can cancel a task if you don't want it to run for the duration of your application.  You must pass the same take helper since this is used to locate the task:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"}," cancelTask(this.task, takeLeading);\n")))}d.isMDXComponent=!0}}]);