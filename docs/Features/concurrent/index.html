<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Proxily Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Proxily Blog Atom Feed"><title data-react-helmet="true">React 18 | Proxily</title><meta data-react-helmet="true" property="og:url" content="https://selsamman.github.io/docs/Features/concurrent"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="React 18 | Proxily"><meta data-react-helmet="true" name="description" content="New Features"><meta data-react-helmet="true" property="og:description" content="New Features"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://selsamman.github.io/docs/Features/concurrent"><link data-react-helmet="true" rel="alternate" href="https://selsamman.github.io/docs/Features/concurrent" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://selsamman.github.io/docs/Features/concurrent" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.79247f1b.css">
<link rel="preload" href="/assets/js/runtime~main.129fa174.js" as="script">
<link rel="preload" href="/assets/js/main.523b3451.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/proxily.svg" alt="Proxily Docs" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/proxily.svg" alt="Proxily Docs" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Proxily</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/Introduction/intro">Docs</a><a href="https://github.com/selsamman/proxily" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/selsamman/proxily" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Features</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Features/observables">Observables</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Features/persistence">Persist &amp; Serialize</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Features/async">Async Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Features/transactions">Transactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Features/tools">Tooling</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/Features/concurrent">React 18</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API - Reference</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">React 18</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="new-features"></a>New Features<a class="hash-link" href="#new-features" title="Direct link to heading">#</a></h2><p>React 18 brings some new capabilities to improve the UX experience. Concurrent Rendering allows React to break up rendering and prioritize it. It can abandon renders when state changes and the rendering components off-screen in preparation for a transition while continuing to display a previous version of  components on-screen.  This feature is fully realized when used in conjunction with <strong>transitions</strong>, <strong>deferred values</strong> and <strong>suspense</strong> described below.</p><ul><li><p><strong>Transitions</strong> are a way to mark state updates that will trigger a transition.  The transition consists of off-screen rendering of components with the updated state while continuing to render components on-screen with previous state.  The off-screen render results are brought on-screen only when the entire transition is complete including rendering suspended elements (see below). </p></li><li><p><strong>Deferred Values</strong> gives the on-screen version of the component access to the previous state while the off-screen version renders with the updated values.  This is useful to avoid triggering a render of child components in the on-screen version of a component that might lead to lags in responsiveness. </p></li><li><p><strong>Suspense</strong> allows a stand-in to be displayed while waiting for data that is not yet ready to be displayed.  Importantly,  React continues to render off-screen the suspended content, so it can get deliver it sooner. This effectively allows multiple streams to be fetched simultaneously rather than sequentially.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="proxily-support"></a>Proxily Support<a class="hash-link" href="#proxily-support" title="Direct link to heading">#</a></h2><p>The magic of off-screen rendering is possible because React is capable of &quot;branching&quot; state.  In effect multiple versions of the state are kept such that the on-screen version of the component has access to the original values and the off-screen version gets the updated values.  </p><p>There are two ways to access the older values in the on-screen version of a component:</p><ul><li><p>Any state updates that are marked as being part of a transition by being wrapped in a <code>startTransition</code> callback are always fed to the future off-screen version of component while the transition is in progress.</p></li><li><p>Previous values can be specifically requested for the benefit of the on-screen version of the component by using a new <code>getDeferredValue</code> function. </p></li></ul><p>This state &quot;branching&quot; is intended to be used with React&#x27;s native setState or by passing values through component props or contexts.  Proxily provides mechanisms to achieve this functionality with observable state.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="transitions"></a>Transitions<a class="hash-link" href="#transitions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="with-setstate"></a>With setState<a class="hash-link" href="#with-setstate" title="Direct link to heading">#</a></h3><p>To use a transition you wrap the code that updates the state that will trigger the transition in a <strong>startTransition</strong> callback:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">useTransition</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;React&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// In component ....</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isPending</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> startTransition</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useTransition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">something</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setSomething</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-variable function" style="color:#d73a49">someEvent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">startTransition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// New value for transition</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>At this point React will render off-screen components that depend on the state change and continue to render on-screen components with the state prior to the transition. You can use <strong>isPending</strong> to display an indication that a transition is in progress.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="with-observables"></a>With Observables<a class="hash-link" href="#with-observables" title="Direct link to heading">#</a></h3><p>Transitions with <strong>observable</strong> in Proxily deal with your entire state and allow it to be branched. The way of using it is quite similar, just substituting useObservableTransition for useTransition.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">useObservableTransition</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;proxily&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> myState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">observable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">something</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// In observer component ...</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isPending</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> startTransition</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useObservableTransition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-variable function" style="color:#d73a49">someEvent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">startTransition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">     myState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">something</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> newValue </span><span class="token comment" style="color:#999988;font-style:italic">// New value for transition</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>When you update your state within the startTransition you are &quot;branching&quot; your state and Proxily will provide the old state the component currently on the screen and the current state to another copy of the component that React renders off-screen.</p><p>If you don&#x27;t to update the component currently on the screen while the off-screen rendering is progress (e.g. don&#x27;t need <strong>isPending</strong> and won&#x27;t be using <strong>getCurrentValue</strong> you may use <strong>useObservableStartTransition</strong> to get your <strong>startTransition</strong>.   </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">useObservableStartTransition</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;proxily&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> startTransition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useObservableStartTransition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="keeping-the-ui-responsive-with-getcurrentvalue"></a>Keeping the UI Responsive with getCurrentValue<a class="hash-link" href="#keeping-the-ui-responsive-with-getcurrentvalue" title="Direct link to heading">#</a></h3><p>You don&#x27;t have to do anything special to take advantage of this advance off-screen rendering unless you need access to the current value of your state.  This might be, for example if you are providing feedback to the user on input they may have provided. </p><p>In case you want to get the current value of the state rather than the stale value that is normally provided during the transition you can access it using <strong><em>getCurrentValue</em></strong>.  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const updatedText = getCurrentValue(state, state =&gt; state.text);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong><em>getCurrentValue</em></strong> is serves a similar purpose as <strong><em>useDeferredValue</em></strong> except that:</p><ul><li>It must be used along with a transition</li><li>It provides the eventual state rather than the previous state</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="putting-it-all-together"></a>Putting it all together<a class="hash-link" href="#putting-it-all-together" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const state = observable({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    searchText: &quot;&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    articles : []</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function SearchList () {</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> const [,startTransition] = useObservableTransition();</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> const change(e) =&gt; startTransition(() =&gt; state.result.text = e.target.value;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> return (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     &lt;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;input value={getCurrentValue(state, state =&gt; state.searchText)}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">               onChange={change}/&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Articles search={state.searchText}/&gt;       </span></span><span class="token-line" style="color:#393A34"><span class="token plain">     &lt;/&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export observer(SearchList);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Here is what will happen:</p><ul><li>When you update search results as part of the startTransition callback you are letting both React and Proxily know that a transition is beginning</li><li>Proxily will update your state immediately but keep the original value around until the transition is complete.</li><li>React will immediately re-render the on-screen component and Proxily will provide the component with the original value of the data because the transition is still in progress.</li><li>However, input field sees the current value through <strong>getCurrentValue</strong> </li><li>The Articles component is passed the old search value and assuming it uses memo it won&#x27;t re-render at that point.</li><li>React will render the component again off-screen. Proxily will provide the new value for searchText so Articles will now render but at a lower priority.  </li><li>The lower priority means that if you type more search criteria into the input the rendering will be cut short once the current article renders and the whole process repeats itself.</li></ul><p>Had we not used the transition the screen would not be updated until the articles all rendered.</p><blockquote><p>Be sure to use <strong>useObservableTransition</strong> rather than <strong>useObservableStartTransition</strong> since you need to re-render the component to show the updated input value while the off-screen rendering takes place.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="suspense"></a>Suspense<a class="hash-link" href="#suspense" title="Direct link to heading">#</a></h2><p>Proxily allows a suspense stand-in to be displayed while asynchronously fetched data is still pending. To use this feature:</p><ul><li><p>Put your data fetching in a getter in an observable.  It can parameterize the fetch with other data in the observable and will keep the query up-to-date. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class MyState = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  profileId = 1,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  get profile() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    fetch(url + &#x27;&amp;id=&#x27; + this.profileId).then(r =&gt; r.json())</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">state = observable(new MyState());</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Then tell proxily you want it to be suspendable which will wrap the fetch in the appropriate promise protocol for using Suspense.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">suspendable(MyState, &#x27;profile`)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>or with a decorator</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@suspendable()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">get profile() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    fetch(url + &#x27;&amp;id=&#x27; + this.profileId).then(r =&gt; r.json())</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Then just use the value in a <strong>&lt;Suspense&gt;</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;Suspense fallback={&lt;h1&gt;Loading user...&lt;/h1&gt;}&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;div&gt;{state.profile.details}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/Suspense&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>When you change the profile id in an event handler, the profile getter will be re-evaluated.  The fallback will re-appear until the new profile is fetched.  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">someEvent = (e) =&gt; state.profileId = e.target.value;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can keep the old value on screen by wrapping the update in a transition:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">someEvent = (e) =&gt; </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    startObservableTransition(() =&gt; state.profileId = e.target.value);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/selsamman/proxily-doc/edit/master/website/docs/Features/concurrent.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Features/tools"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Tooling</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/API/observable"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Observable API Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#new-features" class="table-of-contents__link">New Features</a></li><li><a href="#proxily-support" class="table-of-contents__link">Proxily Support</a></li><li><a href="#transitions" class="table-of-contents__link">Transitions</a><ul><li><a href="#with-setstate" class="table-of-contents__link">With setState</a></li><li><a href="#with-observables" class="table-of-contents__link">With Observables</a></li><li><a href="#keeping-the-ui-responsive-with-getcurrentvalue" class="table-of-contents__link">Keeping the UI Responsive with getCurrentValue</a></li><li><a href="#putting-it-all-together" class="table-of-contents__link">Putting it all together</a></li></ul></li><li><a href="#suspense" class="table-of-contents__link">Suspense</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Examples</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/selsamman/proxily_react_todo_classic" target="_blank" rel="noopener noreferrer" class="footer__link-item">Classic ToDo</a></li><li class="footer__item"><a href="https://github.com/selsamman/proxily-react-todo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Enhanced ToDo</a></li><li class="footer__item"><a href="https://github.com/selsamman/proxily-expo-todo" target="_blank" rel="noopener noreferrer" class="footer__link-item">React Native</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/selsamman/proxily" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/selsamman/proxily/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Sam Elsamman</div></div></div></footer></div>
<script src="/assets/js/runtime~main.129fa174.js"></script>
<script src="/assets/js/main.523b3451.js"></script>
</body>
</html>